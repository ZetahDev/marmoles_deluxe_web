import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.6otl1p8d.js";import{C as c,c as v}from"./card.CLwavOJp.js";import{B as h}from"./button.DXSYegzv.js";function D({transactionId:l,reference:t,status:r}){const[s,m]=d.useState(null),[u,n]=d.useState(!0),[p,f]=d.useState(null);d.useEffect(()=>{console.log("ğŸ” PaymentConfirmation recibiÃ³:",{transactionId:l,reference:t,status:r}),l?N(l):r&&t?(console.log("â„¹ï¸ Mostrando confirmaciÃ³n bÃ¡sica sin consultar API"),n(!1)):(n(!1),f("No se proporcionÃ³ un ID de transacciÃ³n"))},[l,t,r]);const N=async a=>{try{n(!0),console.log("ğŸŒ Consultando API de Wompi para transacciÃ³n:",a);const i=await fetch(`https://production.wompi.co/v1/transactions/${a}`);if(!i.ok){if(console.warn("âš ï¸ API de Wompi no disponible, usando datos de URL"),r&&t){m(null),n(!1);return}throw new Error("No se pudo obtener la informaciÃ³n de la transacciÃ³n")}const j=await i.json();console.log("âœ… Datos recibidos de Wompi:",j),m(j.data)}catch(i){console.error("Error fetching transaction:",i),r&&t?(console.log("â„¹ï¸ Usando datos de URL como fallback"),m(null)):f("Error al obtener los detalles de la transacciÃ³n")}finally{n(!1)}},b=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(v(a)),g=a=>new Intl.DateTimeFormat("es-CO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a)),y=a=>{switch(a){case"APPROVED":return{icon:"âœ…",title:"Â¡Pago Exitoso!",message:"Tu pago ha sido procesado correctamente",color:"bg-green-50 border-green-200",textColor:"text-green-800"};case"PENDING":return{icon:"â³",title:"Pago Pendiente",message:"Tu pago estÃ¡ siendo procesado",color:"bg-yellow-50 border-yellow-200",textColor:"text-yellow-800"};case"DECLINED":return{icon:"âŒ",title:"Pago Rechazado",message:"Tu pago no pudo ser procesado",color:"bg-red-50 border-red-200",textColor:"text-red-800"};case"VOIDED":return{icon:"ğŸš«",title:"Pago Anulado",message:"Esta transacciÃ³n ha sido anulada",color:"bg-gray-50 border-gray-200",textColor:"text-gray-800"};default:return{icon:"â„¹ï¸",title:"Estado Desconocido",message:"No se pudo determinar el estado del pago",color:"bg-blue-50 border-blue-200",textColor:"text-blue-800"}}};if(u)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#8B4513]"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verificando tu pago..."})]});if(p||!s&&!r)return e.jsxs(c,{className:"p-8 max-w-2xl mx-auto text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error al Verificar el Pago"}),e.jsx("p",{className:"text-gray-600 mb-6",children:p||"No se pudo obtener la informaciÃ³n de la transacciÃ³n"}),e.jsx(h,{onClick:()=>window.location.href="/",children:"Volver al Inicio"})]});const x=s?.status||r||"UNKNOWN",o=y(x);return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs(c,{className:`p-8 text-center border-2 ${o.color}`,children:[e.jsx("div",{className:"text-7xl mb-4",children:o.icon}),e.jsx("h1",{className:`text-3xl font-bold mb-2 ${o.textColor}`,children:o.title}),e.jsx("p",{className:`text-lg ${o.textColor}`,children:o.message})]}),e.jsxs(c,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 border-b pb-2",children:"ğŸ“‹ Detalles de la TransacciÃ³n"}),e.jsxs("div",{className:"space-y-3",children:[(s?.id||l)&&e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"ID de TransacciÃ³n:"}),e.jsx("span",{className:"font-mono text-sm font-semibold",children:s?.id||l})]}),(s?.reference||t)&&e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Referencia:"}),e.jsx("span",{className:"font-mono text-sm font-semibold",children:s?.reference||t})]}),s?.amount_in_cents&&e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Monto:"}),e.jsx("span",{className:"text-xl font-bold text-[#8B4513]",children:b(s.amount_in_cents)})]}),s?.payment_method_type&&e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"MÃ©todo de Pago:"}),e.jsx("span",{className:"font-medium capitalize",children:s.payment_method_type.replace("_"," ")})]}),s?.created_at&&e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha:"}),e.jsx("span",{className:"font-medium",children:g(s.created_at)})]}),s?.customer_email&&e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-medium",children:s.customer_email})]}),!s&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:e.jsx("p",{children:"Los detalles completos se enviarÃ¡n a tu correo electrÃ³nico"})})]})]}),x==="APPROVED"&&e.jsxs(c,{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ğŸ¯"})," PrÃ³ximos Pasos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-2xl mr-3",children:"1ï¸âƒ£"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ConfirmaciÃ³n por Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:"RecibirÃ¡s un email con los detalles de tu compra y prÃ³ximos pasos"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-2xl mr-3",children:"2ï¸âƒ£"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"CoordinaciÃ³n de Servicio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nuestro equipo se pondrÃ¡ en contacto contigo en las prÃ³ximas 24 horas para coordinar"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-2xl mr-3",children:"3ï¸âƒ£"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"EjecuciÃ³n"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Realizaremos el servicio o enviaremos tu producto segÃºn lo acordado"})]})]})]})]}),e.jsxs(c,{className:"p-6 bg-gradient-to-br from-amber-50 to-orange-50",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ğŸ“"})," Â¿Necesitas Ayuda?"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"ğŸ“§"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("a",{href:"mailto:info@marmolesdeluxe.com",className:"font-semibold text-[#8B4513] hover:underline",children:"info@marmolesdeluxe.com"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"ğŸ’¬"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"WhatsApp"}),e.jsx("a",{href:"https://wa.me/573001234567",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-[#8B4513] hover:underline",children:"+57 300 123 4567"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"ğŸ•"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Horario de AtenciÃ³n"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["Lunes a Viernes: 8:00 AM - 6:00 PM",e.jsx("br",{}),"SÃ¡bados: 9:00 AM - 2:00 PM"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(h,{onClick:()=>window.location.href="/",variant:"outline",size:"lg",children:"ğŸ  Volver al Inicio"}),e.jsx(h,{onClick:()=>window.print(),className:"bg-[#8B4513] hover:bg-[#6d3410]",size:"lg",children:"ğŸ–¨ï¸ Imprimir Comprobante"})]}),x==="APPROVED"&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-500 italic",children:"ğŸ“¬ Un comprobante detallado ha sido enviado a tu correo electrÃ³nico"})})]})}export{D as default};
