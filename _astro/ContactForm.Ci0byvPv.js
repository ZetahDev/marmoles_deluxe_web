import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as b}from"./index.6otl1p8d.js";class f{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const H=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:H()},y=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},$=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=y(e);i.publicKey=s.publicKey,i.blockHeadless=s.blockHeadless,i.storageProvider=s.storageProvider,i.blockList=s.blockList,i.limitRate=s.limitRate,i.origin=s.origin||t},w=async(e,t,s={})=>{const n=await fetch(i.origin+e,{method:"POST",headers:s,body:t}),a=await n.text(),o=new f(n.status,a);if(n.ok)return o;throw o},v=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},C=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},j=e=>e.webdriver||!e.languages||e.languages.length===0,k=()=>new f(451,"Unavailable For Headless Browser"),V=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},q=e=>!e.list?.length||!e.watchVariable,M=(e,t)=>e instanceof FormData?e.get(t):e[t],S=(e,t)=>{if(q(e))return!1;V(e.list,e.watchVariable);const s=M(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},N=()=>new f(403,"Forbidden"),A=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},K=async(e,t,s)=>{const n=Number(await s.get(e)||0);return t-Date.now()+n},T=async(e,t,s)=>{if(!t.throttle||!s)return!1;A(t.throttle,t.id);const n=t.id||e;return await K(n,t.throttle,s)>0?!0:(await s.set(n,Date.now().toString()),!1)},E=()=>new f(429,"Too Many Requests"),O=async(e,t,s,n)=>{const a=y(n),o=a.publicKey||i.publicKey,p=a.blockHeadless||i.blockHeadless,g=a.storageProvider||i.storageProvider,m={...i.blockList,...a.blockList},h={...i.limitRate,...a.limitRate};return p&&j(navigator)?Promise.reject(k()):(v(o,e,t),C(s),s&&S(m,s)?Promise.reject(N()):await T(location.pathname,h,g)?Promise.reject(E()):w("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},B=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},D=e=>typeof e=="string"?document.querySelector(e):e,I=async(e,t,s,n)=>{const a=y(n),o=a.publicKey||i.publicKey,p=a.blockHeadless||i.blockHeadless,g=i.storageProvider||a.storageProvider,m={...i.blockList,...a.blockList},h={...i.limitRate,...a.limitRate};if(p&&j(navigator))return Promise.reject(k());const d=D(s);v(o,e,t),B(d);const l=new FormData(d);return S(m,l)?Promise.reject(N()):await T(location.pathname,h,g)?Promise.reject(E()):(l.append("lib_version","4.4.1"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",o),w("/api/v1.0/email/send-form",l))},W={init:$,send:O,sendForm:I,EmailJSResponseStatus:f},U="service_na9o3ub",z="template_bll1rds",J="YsOXeIbRezMr8efGI",Y="+573132592793",Q=()=>{const e=b.useRef(),[t,s]=b.useState({name:"",phone:"",email:"",message:""}),[n,a]=b.useState(!1),[o,p]=b.useState({}),[g,m]=b.useState(!1),[h,d]=b.useState(!1),l=c=>{const{name:u,value:x}=c.target;s({...t,[u]:x}),o[u]&&p({...o,[u]:""})},P=()=>{const c={};return t.name.trim()||(c.name="El nombre es requerido"),t.phone.trim()||(c.phone="El tel√©fono es requerido"),t.email.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(c.email="Correo electr√≥nico inv√°lido"):c.email="El correo electr√≥nico es requerido",t.message.trim()||(c.message="El mensaje es requerido"),p(c),Object.keys(c).length===0},R=async c=>{if(c.preventDefault(),!!P()){a(!0),m(!1),d(!1);try{const u=`Tel√©fono: ${t.phone}

${t.message}`,x={title:"Nueva solicitud de visita t√©cnica - 15% descuento web",name:t.name,email:t.email,message:u};try{await W.send(U,z,x,J),console.log("‚úÖ Correo enviado exitosamente!")}catch(_){console.warn("‚ö†Ô∏è No se pudo enviar por email:",_)}const L=`
üîî *Nueva Solicitud de Visita T√©cnica*
üí∞ *Promoci√≥n: 15% de descuento por compra web*

üë§ *Nombre:* ${t.name}
üìû *Tel√©fono:* ${t.phone}
üìß *Email:* ${t.email}

üìù *Mensaje:*
${t.message}
      `.trim(),F=`https://wa.me/${Y}?text=${encodeURIComponent(L)}`;window.open(F,"_blank"),m(!0),s({name:"",phone:"",email:"",message:""}),setTimeout(()=>m(!1),5e3)}catch(u){console.error("‚ùå Error al procesar el formulario:",u),d(!0),setTimeout(()=>d(!1),5e3)}finally{a(!1)}}};return r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-marmoles-black mb-2",children:"Solicita tu Visita T√©cnica"}),r.jsx("p",{className:"text-marmoles-gold font-semibold mb-4",children:"üéâ ¬°Obt√©n 15% de descuento en tu compra por solicitar a trav√©s de la web!"}),g&&r.jsx("div",{className:"mb-6 p-4 rounded-md bg-green-50 text-green-700 border border-green-200",children:"‚úÖ ¬°Solicitud enviada! Se abrir√° WhatsApp para confirmar tu informaci√≥n. Nos pondremos en contacto contigo pronto."}),h&&r.jsx("div",{className:"mb-6 p-4 rounded-md bg-yellow-50 text-yellow-700 border border-yellow-200",children:"‚ö†Ô∏è Se abrir√° WhatsApp para enviar tu solicitud. Si tienes problemas, cont√°ctanos directamente al +57 313 259 2793"}),r.jsxs("form",{ref:e,onSubmit:R,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${o.name?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu nombre"}),o.name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel√©fono"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${o.phone?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu tel√©fono"}),o.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.phone})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr√≥nico"}),r.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${o.email?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu correo electr√≥nico"}),o.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),r.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:l,rows:"4",className:`w-full px-4 py-3 rounded-lg border ${o.message?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"¬øEn qu√© podemos ayudarte?"}),o.message&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.message})]}),r.jsx("button",{type:"submit",disabled:n,className:`w-full bg-marmoles-gold text-white font-semibold py-3 px-6 rounded-lg
          transition-all duration-300 hover:bg-opacity-90 focus:outline-none focus:ring-2 
          focus:ring-offset-2 focus:ring-marmoles-gold ${n?"opacity-70 cursor-not-allowed":""}`,children:n?"Enviando...":"üìß Enviar Solicitud (Email + WhatsApp)"}),r.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Tu solicitud se enviar√° por email y WhatsApp para garantizar que la recibamos"})]})]})};export{Q as default};
