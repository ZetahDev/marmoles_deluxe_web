import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a,R as j}from"./index.6otl1p8d.js";import{C as y,a as N,b as k,c as C,d as I}from"./carousel.Bqi0lhs0.js";import{c as E}from"./index.C4PlTqAK.js";import"./button.DIDfdi4O.js";const L=E(l=>({currentImageIndex:0,setCurrentImageIndex:h=>l({currentImageIndex:h}),resetImageIndex:()=>l({currentImageIndex:0})})),$=({title:l,description:h,image:g,images:f=[],features:u=[],category:i="",isOpen:o,onClose:d})=>{const r=f.length>0?f:[g],[c,m]=a.useState(0),x=L(s=>s.resetImageIndex),p=a.useRef(null);a.useEffect(()=>(o?document.body.style.overflow="hidden":(document.body.style.overflow="",x()),()=>{document.body.style.overflow=""}),[o,x]),a.useEffect(()=>{if(!o)return;const s=t=>{p.current&&!p.current.contains(t.target)&&d()};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[o,d]),a.useEffect(()=>{if(!o)return;const s=t=>{t.key==="Escape"&&d()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[o,d]),a.useEffect(()=>{if(o){const s=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),t=`${window.location.pathname}?material=${s}`;window.history.pushState({},"",t)}},[o,l]),a.useEffect(()=>{o||window.history.pushState({},"",window.location.pathname)},[o]),a.useEffect(()=>{o&&m(0)},[o]);const b=()=>{const s=window.location.href;navigator.share?navigator.share({title:`${l} - Mármoles Deluxe`,text:`¡Mira este hermoso material ${i?.toLowerCase()||""} de Mármoles Deluxe!`,url:s}):(navigator.clipboard.writeText(s),alert("¡Enlace copiado al portapapeles!"))};return e.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-2 px-2 pb-4 pt-10 sm:p-6 sm:pb-8 sm:pt-14 transition-all duration-300 ${o?"opacity-100 backdrop-blur-[4px]":"pointer-events-none opacity-0"}`,children:[e.jsx("div",{className:`fixed inset-0 bg-black/75 backdrop-blur-sm transition-all duration-300 ${o?"opacity-100":"opacity-0"}`}),e.jsxs("div",{ref:p,className:`relative w-full max-h-[90vh] overflow-y-auto max-w-xl sm:max-w-2xl lg:max-w-4xl transform overflow-hidden rounded-lg sm:rounded-xl md:rounded-2xl bg-white/95 backdrop-blur-sm p-3 pt-6 sm:p-5 md:p-5 lg:p-6 shadow-xl shadow-black/20 transition-all duration-300 ${o?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"}`,children:[e.jsxs("div",{className:"absolute right-2 top-2 flex gap-2 z-10",children:[e.jsx("button",{className:"rounded-full p-1.5 bg-white/90 shadow-sm text-gray-700 hover:bg-white hover:scale-105 transition-all",onClick:b,title:"Compartir",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),e.jsx("button",{className:"rounded-full p-1.5 bg-white/90 shadow-sm text-gray-700 hover:bg-white hover:scale-105 transition-all",onClick:d,title:"Cerrar",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative aspect-[4/3] w-full overflow-hidden rounded-lg",style:{maxWidth:"100%"},children:[e.jsx("img",{src:r[c],alt:`${l} - vista ${c+1}`,className:"w-full h-full object-cover",style:{maxWidth:"100%",height:"auto",display:"block"}}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m((c-1+r.length)%r.length),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white h-8 w-8 rounded-full flex items-center justify-center z-10 text-marmoles-gold border border-marmoles-gold/20 hover:border-marmoles-gold transition-all duration-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})})}),e.jsx("button",{onClick:()=>m((c+1)%r.length),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white h-8 w-8 rounded-full flex items-center justify-center z-10 text-marmoles-gold border border-marmoles-gold/20 hover:border-marmoles-gold transition-all duration-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),r.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.map((s,t)=>e.jsx("div",{className:`aspect-square overflow-hidden rounded-lg cursor-pointer transition-all duration-200 ${c===t?"ring-2 ring-marmoles-gold opacity-100":"hover:opacity-75 opacity-60"}`,onClick:()=>m(t),children:e.jsx("img",{src:s,alt:`${l} - miniatura ${t+1}`,className:"h-full w-full object-cover"})},t))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium bg-marmoles-gold/10 text-marmoles-gold mb-1",children:i}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:l}),e.jsx("p",{className:"mt-1 text-gray-600 leading-snug text-sm sm:text-base",children:h}),u.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Características"}),e.jsx("ul",{className:"space-y-1.5",children:u.map((s,t)=>e.jsxs("li",{className:"flex items-start text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-marmoles-gold mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm sm:text-base",children:s})]},t))})]}),e.jsx("div",{className:"pt-1 sm:pt-2",children:e.jsx("button",{onClick:()=>{const s=`Hola, estoy interesado en obtener más información sobre ${i?`${i} - `:""}${l}.`,t=encodeURIComponent(s);window.open(`https://wa.me/+573132592793?text=${t}`,"_blank")},className:"w-full bg-marmoles-black text-white py-2.5 rounded-lg hover:bg-opacity-90 transition-colors duration-300 focus:ring-2 focus:ring-marmoles-gold focus:outline-none text-sm font-medium",children:"Solicitar Información"})})]})]})]})]})},M=({name:l,description:h,images:g,price:f,features:u=[],category:i="",slug:o})=>{const[d,r]=a.useState(!1),[c,m]=a.useState(!1),x=a.useRef(null),p=a.useCallback(()=>{const t=`Hola, estoy interesado en obtener más información sobre la piedra sinterizada: ${i?`${i} - `:""}${l}.`,w=`https://wa.me/+573132592793?text=${encodeURIComponent(t)}`;window.open(w,"_blank")},[i,l]),b=200;a.useEffect(()=>{const t=w=>{const{id:v}=w.detail;m(v===o)},n=()=>{m(!1)};return document.addEventListener("modal-state-change",t),document.addEventListener("modal-close",n),()=>{document.removeEventListener("modal-state-change",t),document.removeEventListener("modal-close",n)}},[o]);const s=t=>{if(x.current&&t.target instanceof Node&&x.current.contains(t.target)&&(t.target.closest("button")||t.target.closest("svg")||t.target.closest("path")))return;const n=new CustomEvent("modal-state-change",{detail:{id:o}});document.dispatchEvent(n)};return e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full max-w-md w-full overflow-hidden",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:s,style:{maxWidth:"100%"},children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative aspect-video w-full mb-6 overflow-hidden",children:[e.jsxs(y,{className:"w-full h-full absolute inset-0",ref:x,children:[e.jsx(N,{className:"h-full",children:g.map((t,n)=>e.jsx(k,{className:"h-full w-full",children:e.jsx("div",{className:"w-full h-full overflow-hidden bg-gray-100",children:e.jsx("img",{src:t,alt:`${l} ${n===0?"":"- diseño"}`,className:"w-full h-full object-cover rounded-lg",style:{objectPosition:"left bottom",height:b,width:"100%",contentVisibility:"auto",maxWidth:"100%",display:"block"},loading:"lazy",decoding:"async",fetchPriority:n===0?"high":"low",onLoad:w=>{n===0&&(w.currentTarget.style.contentVisibility="visible")}})})},n))}),d&&e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-75 hover:bg-opacity-100 h-8 w-8 rounded-full flex items-center justify-center z-10 text-marmoles-gold hover:text-marmoles-gold border border-marmoles-gold/20 hover:border-marmoles-gold transition-all duration-200 disabled:opacity-30 disabled:cursor-not-allowed"}),e.jsx(I,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-75 hover:bg-opacity-100 h-8 w-8 rounded-full flex items-center justify-center z-10 text-marmoles-gold hover:text-marmoles-gold border border-marmoles-gold/20 hover:border-marmoles-gold transition-all duration-200 disabled:opacity-30 disabled:cursor-not-allowed"})]})]}),f&&e.jsx("div",{className:"absolute top-4 right-4 bg-marmoles-gold text-white px-3 py-1 rounded-full text-sm font-semibold z-20",children:f})]})}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-marmoles-black mb-2 truncate",children:l}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h}),u.length>0&&e.jsx("ul",{className:"space-y-2 mb-4",children:u.map(t=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 text-marmoles-gold mr-2",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})}),t]},t))})]}),e.jsx("div",{className:"px-5 pb-5 mt-auto",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),p()},className:"w-full bg-marmoles-black text-white py-3 rounded-lg hover:bg-opacity-90 transition-colors duration-300 focus:ring-2 focus:ring-marmoles-gold focus:outline-none text-sm",children:"Solicitar Información"})})]}),e.jsx($,{title:l,description:h,image:g[0],images:g,features:u,category:i,isOpen:c,onClose:()=>{const t=new CustomEvent("modal-close");document.dispatchEvent(t)}})]})},P=j.memo(M);export{P as default};
