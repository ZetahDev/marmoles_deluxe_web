import{j as o}from"./jsx-runtime.D_zvdyIk.js";import{r as g}from"./index.6otl1p8d.js";class p{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const R=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:R()},v=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},F=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=v(e);i.publicKey=s.publicKey,i.blockHeadless=s.blockHeadless,i.storageProvider=s.storageProvider,i.blockList=s.blockList,i.limitRate=s.limitRate,i.origin=s.origin||t},y=async(e,t,s={})=>{const n=await fetch(i.origin+e,{method:"POST",headers:s,body:t}),a=await n.text(),r=new p(n.status,a);if(n.ok)return r;throw r},j=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},H=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},w=e=>e.webdriver||!e.languages||e.languages.length===0,k=()=>new p(451,"Unavailable For Headless Browser"),_=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},C=e=>!e.list?.length||!e.watchVariable,V=(e,t)=>e instanceof FormData?e.get(t):e[t],S=(e,t)=>{if(C(e))return!1;_(e.list,e.watchVariable);const s=V(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},T=()=>new p(403,"Forbidden"),q=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},K=async(e,t,s)=>{const n=Number(await s.get(e)||0);return t-Date.now()+n},N=async(e,t,s)=>{if(!t.throttle||!s)return!1;q(t.throttle,t.id);const n=t.id||e;return await K(n,t.throttle,s)>0?!0:(await s.set(n,Date.now().toString()),!1)},P=()=>new p(429,"Too Many Requests"),M=async(e,t,s,n)=>{const a=v(n),r=a.publicKey||i.publicKey,b=a.blockHeadless||i.blockHeadless,f=a.storageProvider||i.storageProvider,m={...i.blockList,...a.blockList},h={...i.limitRate,...a.limitRate};return b&&w(navigator)?Promise.reject(k()):(j(r,e,t),H(s),s&&S(m,s)?Promise.reject(T()):await N(location.pathname,h,f)?Promise.reject(P()):y("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},D=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},O=e=>typeof e=="string"?document.querySelector(e):e,$=async(e,t,s,n)=>{const a=v(n),r=a.publicKey||i.publicKey,b=a.blockHeadless||i.blockHeadless,f=i.storageProvider||a.storageProvider,m={...i.blockList,...a.blockList},h={...i.limitRate,...a.limitRate};if(b&&w(navigator))return Promise.reject(k());const d=O(s);j(r,e,t),D(d);const l=new FormData(d);return S(m,l)?Promise.reject(T()):await N(location.pathname,h,f)?Promise.reject(P()):(l.append("lib_version","4.4.1"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",r),y("/api/v1.0/email/send-form",l))},B={init:F,send:M,sendForm:$,EmailJSResponseStatus:p},I="service_na9o3ub",A="template_bll1rds",J="YsOXeIbRezMr8efGI",z=()=>{const e=g.useRef(),[t,s]=g.useState({name:"",phone:"",email:"",message:""}),[n,a]=g.useState(!1),[r,b]=g.useState({}),[f,m]=g.useState(!1),[h,d]=g.useState(!1),l=c=>{const{name:u,value:x}=c.target;s({...t,[u]:x}),r[u]&&b({...r,[u]:""})},E=()=>{const c={};return t.name.trim()||(c.name="El nombre es requerido"),t.phone.trim()||(c.phone="El teléfono es requerido"),t.email.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(c.email="Correo electrónico inválido"):c.email="El correo electrónico es requerido",t.message.trim()||(c.message="El mensaje es requerido"),b(c),Object.keys(c).length===0},L=async c=>{if(c.preventDefault(),!!E()){a(!0),m(!1),d(!1);try{const u=`Teléfono: ${t.phone}

${t.message}`,x={title:"Nueva solicitud desde el sitio web",name:t.name,email:t.email,message:u};await B.send(I,A,x,J),console.log("¡Correo enviado exitosamente!"),m(!0),s({name:"",phone:"",email:"",message:""}),setTimeout(()=>m(!1),5e3)}catch(u){console.error("Error al enviar el mensaje:",u),d(!0),setTimeout(()=>d(!1),5e3)}finally{a(!1)}}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-marmoles-black mb-6",children:"Solicita tu Visita Técnica"}),f&&o.jsx("div",{className:"mb-6 p-4 rounded-md bg-green-50 text-green-700 border border-green-200",children:"¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto."}),h&&o.jsx("div",{className:"mb-6 p-4 rounded-md bg-red-50 text-red-700 border border-red-200",children:"Hubo un problema al enviar tu mensaje. Por favor intenta nuevamente o contáctanos directamente."}),o.jsxs("form",{ref:e,onSubmit:L,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),o.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${r.name?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu nombre"}),r.name&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${r.phone?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu teléfono"}),r.phone&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electrónico"}),o.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:l,className:`w-full px-4 py-3 rounded-lg border ${r.email?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"Tu correo electrónico"}),r.email&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),o.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:l,rows:"4",className:`w-full px-4 py-3 rounded-lg border ${r.message?"border-red-500":"border-marmoles-gold"} focus:outline-none focus:ring-2 focus:ring-marmoles-gold transition-all`,placeholder:"¿En qué podemos ayudarte?"}),r.message&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.message})]}),o.jsx("button",{type:"submit",disabled:n,className:`w-full bg-marmoles-gold text-white font-semibold py-3 px-6 rounded-lg
          transition-all duration-300 hover:bg-opacity-90 focus:outline-none focus:ring-2 
          focus:ring-offset-2 focus:ring-marmoles-gold ${n?"opacity-70 cursor-not-allowed":""}`,children:n?"Enviando...":"Enviar Solicitud"})]})]})};export{z as default};
