import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r as w}from"./index.6otl1p8d.js";import{c as j}from"./index.C4PlTqAK.js";const I={};function L(m,c){let s;try{s=m()}catch{return}return{getItem:a=>{var e;const n=u=>u===null?null:JSON.parse(u,void 0),d=(e=s.getItem(a))!=null?e:null;return d instanceof Promise?d.then(n):n(d)},setItem:(a,e)=>s.setItem(a,JSON.stringify(e,void 0)),removeItem:a=>s.removeItem(a)}}const S=m=>c=>{try{const s=m(c);return s instanceof Promise?s:{then(i){return S(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return S(i)(s)}}}},N=(m,c)=>(s,i,a)=>{let e={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:r=>r,version:0,merge:(r,h)=>({...h,...r}),...c},n=!1;const d=new Set,u=new Set;let l;try{l=e.getStorage()}catch{}if(!l)return m((...r)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),s(...r)},i,a);const b=S(e.serialize),x=()=>{const r=e.partialize({...i()});let h;const t=b({state:r,version:e.version}).then(v=>l.setItem(e.name,v)).catch(v=>{h=v});if(h)throw h;return t},y=a.setState;a.setState=(r,h)=>{y(r,h),x()};const g=m((...r)=>{s(...r),x()},i,a);let p;const o=()=>{var r;if(!l)return;n=!1,d.forEach(t=>t(i()));const h=((r=e.onRehydrateStorage)==null?void 0:r.call(e,i()))||void 0;return S(l.getItem.bind(l))(e.name).then(t=>{if(t)return e.deserialize(t)}).then(t=>{if(t)if(typeof t.version=="number"&&t.version!==e.version){if(e.migrate)return e.migrate(t.state,t.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return t.state}).then(t=>{var v;return p=e.merge(t,(v=i())!=null?v:g),s(p,!0),x()}).then(()=>{h?.(p,void 0),n=!0,u.forEach(t=>t(p))}).catch(t=>{h?.(void 0,t)})};return a.persist={setOptions:r=>{e={...e,...r},r.getStorage&&(l=r.getStorage())},clearStorage:()=>{l?.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>o(),hasHydrated:()=>n,onHydrate:r=>(d.add(r),()=>{d.delete(r)}),onFinishHydration:r=>(u.add(r),()=>{u.delete(r)})},o(),p||g},_=(m,c)=>(s,i,a)=>{let e={storage:L(()=>localStorage),partialize:o=>o,version:0,merge:(o,r)=>({...r,...o}),...c},n=!1;const d=new Set,u=new Set;let l=e.storage;if(!l)return m((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),s(...o)},i,a);const b=()=>{const o=e.partialize({...i()});return l.setItem(e.name,{state:o,version:e.version})},x=a.setState;a.setState=(o,r)=>{x(o,r),b()};const y=m((...o)=>{s(...o),b()},i,a);a.getInitialState=()=>y;let g;const p=()=>{var o,r;if(!l)return;n=!1,d.forEach(t=>{var v;return t((v=i())!=null?v:y)});const h=((r=e.onRehydrateStorage)==null?void 0:r.call(e,(o=i())!=null?o:y))||void 0;return S(l.getItem.bind(l))(e.name).then(t=>{if(t)if(typeof t.version=="number"&&t.version!==e.version){if(e.migrate)return[!0,e.migrate(t.state,t.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,t.state];return[!1,void 0]}).then(t=>{var v;const[M,k]=t;if(g=e.merge(k,(v=i())!=null?v:y),s(g,!0),M)return b()}).then(()=>{h?.(g,void 0),g=i(),n=!0,u.forEach(t=>t(g))}).catch(t=>{h?.(void 0,t)})};return a.persist={setOptions:o=>{e={...e,...o},o.storage&&(l=o.storage)},clearStorage:()=>{l?.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>p(),hasHydrated:()=>n,onHydrate:o=>(d.add(o),()=>{d.delete(o)}),onFinishHydration:o=>(u.add(o),()=>{u.delete(o)})},e.skipHydration||p(),g||y},E=(m,c)=>"getStorage"in c||"serialize"in c||"deserialize"in c?((I?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),N(m,c)):_(m,c),H=E,O=j()(H(m=>({isMobileMenuOpen:!1,setMobileMenuOpen:c=>m({isMobileMenuOpen:c}),toggleMobileMenu:()=>m(c=>({isMobileMenuOpen:!c.isMobileMenuOpen}))}),{name:"navbar-storage",partialize:m=>({isMobileMenuOpen:m.isMobileMenuOpen})})),z=({navItems:m,currentPath:c})=>{const{isMobileMenuOpen:s,toggleMobileMenu:i,setMobileMenuOpen:a}=O();w.useEffect(()=>{const n=u=>{const l=u.target;s&&!l.closest("#mobile-menu")&&!l.closest("#mobile-menu-button")&&a(!1)},d=u=>{u.key==="Escape"&&a(!1)};return document.addEventListener("click",n),document.addEventListener("keydown",d),()=>{document.removeEventListener("click",n),document.removeEventListener("keydown",d)}},[s,a]);const e=n=>{n.preventDefault();const d=n.currentTarget.nextElementSibling;d&&d.classList.toggle("hidden")};return f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"md:hidden p-2 text-marmoles-gold hover:text-marmoles-gold transition-colors",id:"mobile-menu-button","aria-label":"Menú",onClick:i,"aria-expanded":s,children:f.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s?f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),f.jsx("div",{className:`md:hidden absolute top-16 left-0 w-full bg-white/80 backdrop-blur-md border-b border-white/20 shadow-lg transition-all duration-300 ${s?"max-h-screen opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,id:"mobile-menu","aria-hidden":!s,children:f.jsx("div",{className:"px-4 py-3 space-y-3",children:m.map((n,d)=>n.isLogo?f.jsx("a",{href:n.href,className:"block",children:f.jsx("img",{src:"/images/logo.png",alt:"Mármoles Deluxe Logo",className:"h-12 w-auto mx-auto logo-gold"})},`mobile-item-${d}`):n.items?f.jsxs("div",{className:"space-y-2",children:[f.jsxs("button",{className:"text-sm font-medium text-gray-800 hover:text-marmoles-gold w-full text-left flex justify-between items-center",onClick:e,children:[n.label,f.jsx("svg",{className:"h-4 w-4 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),f.jsx("div",{className:"hidden pl-4 space-y-2",children:n.items.map(({href:u,label:l},b)=>f.jsx("a",{href:u,className:`block text-sm font-medium hover:text-marmoles-gold py-2 ${c===u||c.endsWith(u)?"text-marmoles-gold":"text-gray-800"}`,onClick:()=>a(!1),children:l},`mobile-subitem-${d}-${b}`))})]},`mobile-item-${d}`):f.jsx("a",{href:n.href,className:`block text-sm font-medium py-2 ${n.href&&(c===n.href||c.endsWith(n.href))?"text-marmoles-gold":"text-gray-800 hover:text-marmoles-gold"}`,onClick:()=>a(!1),children:n.label},`mobile-item-${d}`))})})]})};export{z as default};
