import{u as s,A as m}from"./uploads.C2QK9uhh.js";document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("testimonialForm");if(!o){console.error("Form element not found");return}o.addEventListener("submit",async a=>{a.preventDefault();const e=new FormData(o),i={nombre:e.get("nombre"),texto:e.get("texto"),instagram:e.get("instagram")};try{const t=e.get("imagen");let n="";if(t instanceof File&&(n=await s(t,"testimonios")),!(await fetch(`${m}/testimonials`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...i,imagen:n})})).ok)throw new Error("Failed to create testimonial");alert("Testimonio creado exitosamente");const r=new URL(window.location.href);r.searchParams.set("refresh",Date.now().toString()),window.location.href=r.toString()}catch(t){console.error("Error:",t),alert("Error al crear el testimonio")}})});
