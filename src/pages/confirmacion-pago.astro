---
import Layout from "../layouts/Layout.astro";
import PaymentConfirmation from "../components/PaymentConfirmation";

// Obtener par谩metros de la URL
const id = Astro.url.searchParams.get("id");
const reference = Astro.url.searchParams.get("reference");
const status = Astro.url.searchParams.get("status");

// Log para debugging
console.log(" Par谩metros de confirmaci贸n:", { id, reference, status });

// Metadata para SEO
const title = "Confirmaci贸n de Pago - M谩rmoles Deluxe";
const description = "Confirmaci贸n de tu transacci贸n de pago";
---

<Layout title={title} description={description}>
  <main
    class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4"
  >
    <div class="container mx-auto">
      <!-- Header -->
      <div class="text-center mb-8">
        <a href="/" class="inline-block mb-4">
          <img
            src="/logos/logo.webp"
            alt="M谩rmoles Deluxe"
            class="h-16 mx-auto"
            onerror="this.style.display='none'"
          />
        </a>
      </div>

      <!-- Componente de Confirmaci贸n -->
      <PaymentConfirmation
        client:load
        transactionId={id}
        reference={reference}
        status={status}
      />

      <!-- Informaci贸n Adicional -->
      <div class="max-w-3xl mx-auto mt-12 text-center">
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
          <h3 class="font-semibold text-gray-900 mb-2">
             Pago Seguro con Wompi
          </h3>
          <p class="text-sm text-gray-600">
            Todos los pagos son procesados de forma segura por Wompi, cumpliendo
            con los est谩ndares PCI DSS para la protecci贸n de datos financieros.
          </p>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  @media print {
    /* Estilos para impresi贸n del comprobante */
    nav,
    footer,
    button {
      display: none !important;
    }

    main {
      background: white !important;
    }

    @page {
      margin: 1cm;
    }
  }
</style>
