---
import Layout from "../layouts/Layout.astro";
import { CarouselWrapper } from "../components/CarouselWrapper";
import { TestimonialCarousel } from "../components/TestimonialCarousel";
import ContactForm from "../components/ContactForm";
import SEOSchemaData from "../components/SEOSchemaData.tsx";
import PromoBlancoPolarModal from "@/components/PromoBlancoPolarModal";

// --- Metadatos SEO & Configuraci√≥n ---
const title =
  "M√°rmoles Deluxe: Transforma Tu Hogar en un Palacio por Menos de lo que Piensas";
const description =
  "¬øBuscas m√°rmol de alta gama en Cali? Instalamos en 5 d√≠as o menos. Garant√≠a real. Acabados que provocan envidia. Cotiza gratis hoy.";

const keywords =
  "m√°rmoles Cali, granitos Cali, piedra sinterizada, encimeras de lujo, cocina integral m√°rmol, Neolith, Dekton, Silestone, renovaci√≥n cocina Cali";

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const pageUrl = canonicalURL.toString();
const metaImage = new URL("/images/contactanos-og.jpg", Astro.site).toString();

// --- Datos "Alex Hormozi Style" ---

// Social Proof
const stats = [
  { value: "16+", label: "A√±os Dominando el Mercado", icon: "üëë" },
  { value: "500+", label: "Transformaciones Exitosas", icon: "üè†" },
  { value: "5 D√≠as", label: "Tiempo R√©cord de Instalaci√≥n", icon: "‚ö°" },
  { value: "100%", label: "Garant√≠a de Satisfacci√≥n", icon: "üõ°Ô∏è" },
];

// The "Vehicle" (Services)
const services = [
  {
    title: "Instalaci√≥n Impecable",
    description:
      "No dejamos polvo. No dejamos excusas. Solo perfecci√≥n milim√©trica en tu cocina o ba√±o.",
    accent: "Precisi√≥n Quir√∫rgica",
  },
  {
    title: "Suministro Premium",
    description:
      "Ponemos a tu alcance una colecci√≥n exclusiva de piedras naturales y superficies sinterizadas, importadas directamente para garantizar distinci√≥n en cada espacio.",
    accent: "Materiales Exclusivos",
  },
  {
    title: "Asesor√≠a Especializada",
    description:
      "Te acompa√±amos en la selecci√≥n del material perfecto, evaluando est√©tica y funcionalidad para garantizar el √©xito de tu proyecto.",
    accent: "Experiencia y Criterio",
  },
];

// Projects Data (Keep visual proof)
const projects = [
  {
    title: "Cocina Black Diamond",
    description: "Granito San Gabriel con acabado leather. Elegancia pura.",
    image:
      "https://images.unsplash.com/photo-1556911220-bff31c812dba?q=60&w=600&auto=format&fit=crop",
  },
  {
    title: "Ba√±o Royal White",
    description: "M√°rmol Calacatta importado. El spa en tu propia casa.",
    image:
      "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?q=60&w=600&auto=format&fit=crop",
  },
  {
    title: "Isla Infinity",
    description: "Piedra sinterizada Neolith. Indestructible y hermosa.",
    image:
      "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?q=60&w=600&auto=format&fit=crop",
  },
  {
    title: "Lobby Majestic",
    description: "M√°rmol Crema Marfil. La primera impresi√≥n cuenta.",
    image:
      "https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?q=60&w=600&auto=format&fit=crop",
  },
];

// Testimonials (Social Proof)
const testimonies = [
  {
    name: "Mar√≠a Gonz√°lez",
    text: "Honestamente, ten√≠a miedo del desorden. Pero entraron, instalaron en 4 d√≠as y dejaron todo impecable. Mi cocina parece de revista.",
  },
  {
    name: "Dr. Carlos Rodr√≠guez",
    text: "He contratado 3 marmoler√≠as antes. M√°rmoles Deluxe juega en otra liga. Calidad, rapidez y cero dolores de cabeza.",
  },
  {
    name: "Arq. Ana Mart√≠nez",
    text: "Como arquitecta, soy exigente. Ellos son mis √∫nicos proveedores de confianza para proyectos de alto nivel en Cali.",
  },
  {
    name: "Laura S√°nchez",
    text: "La mejor inversi√≥n que he hecho en mi apartamento. El valor de mi propiedad subi√≥ instant√°neamente.",
  },
];
---

<Layout title={title} description={description}>
  <Fragment slot="head">
    <!-- Critical CSS & Preload -->
    <link
      rel="preload"
      as="image"
      href="https://images.unsplash.com/photo-1600607686527-6fb886090705?q=80&w=2000&auto=format&fit=crop"
      fetchpriority="high"
    />
    <style>
      /* Animaciones Cr√≠ticas */
      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition:
          opacity 0.8s ease-out,
          transform 0.8s ease-out;
      }
      .animate-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* Bot√≥n Brillante */
      .btn-gold-shine {
        position: relative;
        overflow: hidden;
      }
      .btn-gold-shine::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.3) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        transform: rotate(45deg) translate(-100%, 0);
        transition: transform 0.5s;
      }
      .btn-gold-shine:hover::after {
        transform: rotate(45deg) translate(100%, 0);
        transition: transform 0.5s;
      }
    </style>
    <!-- SEO Meta Tags -->
    <meta name="keywords" content={keywords} />
    <link rel="canonical" href={canonicalURL} />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={metaImage} />
  </Fragment>

  <SEOSchemaData
    client:load
    pageTitle={title}
    pageDescription={description}
    pageUrl={pageUrl}
    pageImage={metaImage}
  />

  <!-- HERO SECTION: THE HOOK -->
  <section
    class="relative min-h-[90vh] flex items-center justify-center overflow-hidden bg-marmoles-black text-white"
  >
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
      <img
        src="https://images.unsplash.com/photo-1600607686527-6fb886090705?q=80&w=2000&auto=format&fit=crop"
        alt="Cocina de lujo con m√°rmol negro"
        class="w-full h-full object-cover opacity-60"
        width="1920"
        height="1080"
        fetchpriority="high"
      />
      <div
        class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"
      >
      </div>
    </div>

    <div class="container mx-auto px-4 z-10 relative text-center pt-20">
      <span
        class="inline-block py-1 px-3 rounded-full bg-marmoles-gold/20 border border-marmoles-gold text-marmoles-gold text-sm font-bold mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700"
      >
        EXCLUSIVIDAD Y DISE√ëO EN CADA DETALLE
      </span>

      <h1
        class="text-5xl md:text-7xl font-bold mb-6 tracking-tight leading-tight max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-6 duration-1000 delay-200"
      >
        ARTE Y PRECISI√ìN EN <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-marmoles-gold to-yellow-200"
          >PIEDRA NATURAL</span
        >
      </h1>

      <p
        class="text-xl md:text-2xl text-gray-300 mb-10 max-w-3xl mx-auto font-light animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-300"
      >
        Transformamos espacios con m√°rmoles y piedras sinterizadas de la m√°s
        alta gama. <strong class="text-white"
          >Instalaci√≥n certificada en 5 d√≠as</strong
        >, garantizando elegancia y durabilidad.
      </p>

      <div
        class="flex flex-col md:flex-row gap-4 justify-center items-center animate-in fade-in slide-in-from-bottom-10 duration-1000 delay-500"
      >
        <a
          href="#contacto"
          class="btn-gold-shine bg-marmoles-gold text-marmoles-black px-8 py-4 rounded-lg font-bold text-lg hover:shadow-[0_0_30px_rgba(212,175,55,0.6)] transition-all transform hover:-translate-y-1"
        >
          COTIZAR MI TRANSFORMACI√ìN AHORA
        </a>
        <a
          href="#proyectos"
          class="px-8 py-4 rounded-lg font-medium text-white border border-white/30 hover:bg-white/10 transition-all backdrop-blur-sm"
        >
          Ver Portafolio
        </a>
      </div>

      <p class="mt-6 text-sm text-gray-400 animate-in fade-in delay-700">
        ‚≠ê M√°s de 500 clientes felices en Cali no pueden estar equivocados.
      </p>
    </div>
  </section>

  <!-- SOCIAL PROOF / STATS STRIP -->
  <section class="border-b border-white/10 bg-neutral-900 py-8 relative z-20">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        {
          stats.map((stat) => (
            <div class="text-center animate-on-scroll">
              <div class="text-4xl mb-2">{stat.icon}</div>
              <div class="text-3xl font-bold text-white mb-1">{stat.value}</div>
              <div class="text-sm text-gray-400 uppercase tracking-wider">
                {stat.label}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- THE PROBLEM & SOLUTION (Value Stack) -->
  <section class="py-24 bg-marmoles-white text-marmoles-black overflow-hidden">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center mb-16 animate-on-scroll">
        <h2 class="text-4xl font-bold mb-4">
          La diferencia entre lo bueno y <span class="text-marmoles-gold"
            >lo excepcional</span
          >
        </h2>
        <p class="text-xl text-gray-600">
          Entendemos que su tiempo y su inversi√≥n merecen el m√°ximo respeto.
          Nuestro compromiso es entregar resultados impecables con una
          experiencia de servicio superior.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {
          services.map((service, index) => (
            <div
              class="group p-8 bg-gray-50 rounded-2xl hover:bg-white hover:shadow-2xl transition-all duration-300 border border-gray-100 relative animate-on-scroll"
              style={`transition-delay: ${index * 100}ms`}
            >
              <div class="absolute top-0 right-0 p-4 opacity-10 font-bold text-6xl group-hover:text-marmoles-gold transition-colors">
                0{index + 1}
              </div>
              <h3 class="text-2xl font-bold mb-4 group-hover:text-marmoles-gold transition-colors">
                {service.title}
              </h3>
              <p class="text-gray-600 mb-6 leading-relaxed">
                {service.description}
              </p>
              <div class="inline-block py-1 px-3 bg-marmoles-gold/10 text-marmoles-gold font-semibold text-sm rounded-full">
                {service.accent}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- "THE GRAND SLAM OFFER" (Promo) -->
  <PromoBlancoPolarModal client:idle />

  <!-- PROJECTS (Visuals) -->
  <section id="proyectos" class="py-24 bg-marmoles-black text-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16 animate-on-scroll">
        <span
          class="text-marmoles-gold font-bold tracking-widest uppercase text-sm"
          >Portafolio</span
        >
        <h2 class="text-4xl md:text-5xl font-bold mt-2">
          No Nos Creas, <span
            class="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-500"
            >M√≠ralo.</span
          >
        </h2>
      </div>

      <div class="animate-on-scroll">
        <CarouselWrapper client:visible items={projects} />
      </div>

      <div class="mt-12 text-center animate-on-scroll">
        <a
          href="/proyectos"
          class="text-marmoles-gold hover:text-white underline underline-offset-4 transition-colors"
        >
          Ver todos los proyectos completos &rarr;
        </a>
      </div>
    </div>
  </section>

  <!-- ADVANTAGES / GUARANTEE -->
  <section class="py-20 bg-gradient-to-b from-marmoles-white to-gray-100">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row items-center gap-12">
        <div class="md:w-1/2 animate-on-scroll">
          <img
            src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=1000&auto=format&fit=crop"
            alt="Detalle de m√°rmol de alta calidad"
            class="rounded-2xl shadow-2xl rotate-2 hover:rotate-0 transition-all duration-500"
            loading="lazy"
          />
        </div>
        <div class="md:w-1/2 animate-on-scroll">
          <h2 class="text-4xl font-bold mb-6">Nuestra "Garant√≠a de Hierro"</h2>
          <div class="space-y-6">
            <div class="flex gap-4">
              <div
                class="flex-shrink-0 w-12 h-12 bg-marmoles-black text-marmoles-gold flex items-center justify-center rounded-full text-xl font-bold"
              >
                1
              </div>
              <div>
                <h3 class="font-bold text-xl mb-1">
                  Precio Fijo, Sin Sorpresas
                </h3>
                <p class="text-gray-600">
                  Lo que cotizamos es lo que pagas. Ni un peso m√°s. Odiamos los
                  "costos ocultos" tanto como t√∫.
                </p>
              </div>
            </div>
            <div class="flex gap-4">
              <div
                class="flex-shrink-0 w-12 h-12 bg-marmoles-black text-marmoles-gold flex items-center justify-center rounded-full text-xl font-bold"
              >
                2
              </div>
              <div>
                <h3 class="font-bold text-xl mb-1">Limpieza Absoluta</h3>
                <p class="text-gray-600">
                  Si dejamos polvo en tu casa, te pagamos la limpieza
                  profesional nosotros mismos.
                </p>
              </div>
            </div>
            <div class="flex gap-4">
              <div
                class="flex-shrink-0 w-12 h-12 bg-marmoles-black text-marmoles-gold flex items-center justify-center rounded-full text-xl font-bold"
              >
                3
              </div>
              <div>
                <h3 class="font-bold text-xl mb-1">Calidad Certificada</h3>
                <p class="text-gray-600">
                  Usamos solo Primera Calidad. Nada de saldos ni material de
                  segunda. Te mostramos la etiqueta.
                </p>
              </div>
            </div>
          </div>
          <div class="mt-8">
            <a
              href="/politicas-garantia"
              class="text-marmoles-black font-bold border-b-2 border-marmoles-gold hover:text-marmoles-gold transition-colors pb-1"
            >
              Lee nuestras pol√≠ticas completas
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="py-24 bg-white text-marmoles-black">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl font-bold mb-12 animate-on-scroll">
        Lo Que Dicen Quienes Ya Decidieron <br /><span
          class="text-marmoles-gold">Invertir en Calidad</span
        >
      </h2>
      <div class="animate-on-scroll">
        <TestimonialCarousel client:visible testimonies={testimonies} />
      </div>
    </div>
  </section>

  <!-- CONTACT / CTA SECTION -->
  <section id="contacto" class="py-24 bg-marmoles-black text-white relative">
    <div class="absolute inset-0 overflow-hidden">
      <div
        class="absolute -top-24 -right-24 w-96 h-96 bg-marmoles-gold/20 rounded-full blur-3xl"
      >
      </div>
      <div
        class="absolute -bottom-24 -left-24 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"
      >
      </div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
        <div class="animate-on-scroll">
          <h2 class="text-4xl md:text-5xl font-bold mb-6">
            ¬øListo Para Tener El Hogar Que Te Mereces?
          </h2>
          <p class="text-xl text-gray-300 mb-8">
            Tienes dos opciones:
            <br /><br />
            1. Seguir posponi√©ndolo y ver esas viejas superficies todos los d√≠as.
            <br />
            2. Agendar una visita GRATIS hoy, obtener el 15% de descuento y estrenar
            cocina la pr√≥xima semana.
          </p>

          <div
            class="bg-white/5 p-6 rounded-xl border border-white/10 mb-8 backdrop-blur-sm"
          >
            <h3 class="text-marmoles-gold font-bold text-xl mb-4">
              Lo que obtienes GRATIS al contactarnos hoy:
            </h3>
            <ul class="space-y-3">
              <li class="flex items-center gap-3">
                <span class="text-green-500">‚úì</span> Visita t√©cnica y toma de medidas
                (Valor: $50.000)
              </li>
              <li class="flex items-center gap-3">
                <span class="text-green-500">‚úì</span> Muestras de material en sitio
              </li>
              <li class="flex items-center gap-3">
                <span class="text-green-500">‚úì</span> Asesor√≠a en selecci√≥n de materiales
              </li>
            </ul>
            <p class="mt-4 text-sm text-gray-400 text-center font-mono">
              Oferta v√°lida por tiempo limitado.
            </p>
          </div>
        </div>

        <div
          class="bg-white text-marmoles-black p-8 rounded-2xl shadow-2xl animate-on-scroll"
        >
          <h3 class="text-2xl font-bold mb-6 text-center">
            Reserva Tu Consulta Gratuita
          </h3>
          <ContactForm client:load />
        </div>
      </div>
    </div>
  </section>

  <!-- MAP & LOCATION -->
  <section class="py-0 relative h-96">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3982.6549444444444!2d-76.53333333333333!3d3.433333333333333!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e30a6c7c5c5c5c5%3A0x5c5c5c5c5c5c5c5c!2sCl.%2043a%20Nte.%20%235N%2069%2C%20COMUNA%204%2C%20Cali%2C%20Valle%20del%20Cauca!5e0!3m2!1ses!2sco!4v1620000000000!5m2!1ses!2sco"
      width="100%"
      height="100%"
      style="border:0; filter: grayscale(100%);"
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
      title="Ubicaci√≥n de M√°rmoles Deluxe en Cali"
      aria-label="Mapa de ubicaci√≥n"
    >
    </iframe>
    <div
      class="absolute bottom-4 left-4 bg-white p-4 rounded-lg shadow-lg max-w-xs"
    >
      <p class="font-bold">M√°rmoles Deluxe</p>
      <p class="text-sm text-gray-600">Cl. 43a Nte. #5N 69, Cali</p>
    </div>
  </section>
</Layout>

<script>
  // Script de Optimizaci√≥n de Animaciones (IntersectionObserver)
  document.addEventListener("DOMContentLoaded", () => {
    const observerOptions = {
      root: null,
      rootMargin: "0px",
      threshold: 0.1,
    };

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          observer.unobserve(entry.target); // Animado una sola vez para mejorar rendimiento
        }
      });
    }, observerOptions);

    document.querySelectorAll(".animate-on-scroll").forEach((el) => {
      observer.observe(el);
    });
  });
</script>
